{"ast":null,"code":"import ShowInfo from\"../components/ShowInfo\";// import {myList} from './Home'\n// import SearchBar from \"../components/SearchBar\"\nimport{useState,useEffect}from\"react\";import{useParams,Link}from\"react-router-dom\";// import { unmountComponentAtNode } from \"react-dom\";\nimport{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";const ShowID=0,Title=1,ImageURL=2;export default function Show(_ref){let{user,myList}=_ref;const{id,title}=useParams();const[keyword,setKeyword]=useState('');const[shows,setShows]=useState([]);const[titles,setTitles]=useState([]);const[showSelected,setShowSelected]=useState([id||0,title||'']);var filterFlag=user.length>0;// const [showActors, setShowActors] = useState([]);\n// useEffect(() => {\n// }, [showSelected])\nuseEffect(()=>{setShowSelected([id,title]);setKeyword(\"\");getSearchData(\"\");window.scroll({top:0,left:0,behavior:\"smooth\"});},[id,title]);const getSearchData=async keyword=>{setKeyword(keyword);setTitles([]);// if(keyword === \"\") {\n//     setTitles([])\n// }\n// else {\nvar idRes=[];var tRes=[];const searchData=await fetch('/api/search',{method:'POST',headers:{'content-type':'application/json','Accept':'application/json'},body:JSON.stringify({Title:keyword,myList:myList,flag:filterFlag})}).then(res=>res.json());// console.log(\"RD\", returnedData)\nfor(let i in searchData){searchData[i]=Object.values(searchData[i]);tRes.push(searchData[i][Title]);idRes.push(searchData[i][ShowID]);}setTitles(tRes);setShows(idRes);// }\n};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"show\",children:showSelected[0]!==0&&showSelected[0]!=null//!= 0//.length > 1 //\n?/*#__PURE__*/_jsxs(_Fragment,{children:[showSelected[0]!==0?/*#__PURE__*/_jsxs(\"h1\",{id:\"animeTitle\",children:[\" \",showSelected[Title],\" \"]}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"animeSearchSide\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"animeSearch\",className:\"search\",type:\"search\",placeholder:\"Search Anime\",autoComplete:\"off\",onChange:e=>getSearchData(e.target.value),value:keyword}),/*#__PURE__*/_jsx(\"div\",{className:\"results\",children:titles.slice(0,10).map((title,index)=>/*#__PURE__*/_jsx(Link,{to:\"/Anime/\".concat(shows[index],\"/\").concat(title),className:\"resBox\",children:title}))})]}),/*#__PURE__*/_jsx(ShowInfo,{Show:showSelected,user:user,myList:myList,flag:filterFlag})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{id:\"begin\",children:\"Search for an Anime to Begin!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"animeSearchSide\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"animeSearch\",className:\"search\",type:\"search\",placeholder:\"Search Anime\",autoComplete:\"off\",onChange:e=>getSearchData(e.target.value),value:keyword}),/*#__PURE__*/_jsx(\"div\",{className:\"results\",children:titles.slice(0,10).map((title,index)=>/*#__PURE__*/_jsx(Link,{to:\"/Anime/\".concat(shows[index],\"/\").concat(title),className:\"resBox\",children:title},title))})]})]})})});}","map":{"version":3,"names":["ShowInfo","useState","useEffect","useParams","Link","jsxs","_jsxs","Fragment","_Fragment","jsx","_jsx","ShowID","Title","ImageURL","Show","_ref","user","myList","id","title","keyword","setKeyword","shows","setShows","titles","setTitles","showSelected","setShowSelected","filterFlag","length","getSearchData","window","scroll","top","left","behavior","idRes","tRes","searchData","fetch","method","headers","body","JSON","stringify","flag","then","res","json","i","Object","values","push","children","className","type","placeholder","autoComplete","onChange","e","target","value","slice","map","index","to","concat"],"sources":["C:/Users/aphen/OneDrive/Documents/whoseiyu/src/pages/Show.js"],"sourcesContent":["import ShowInfo from \"../components/ShowInfo\"\r\n// import {myList} from './Home'\r\n// import SearchBar from \"../components/SearchBar\"\r\nimport { useState, useEffect } from \"react\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\n// import { unmountComponentAtNode } from \"react-dom\";\r\nconst   ShowID      = 0,\r\n        Title       = 1,\r\n        ImageURL    = 2;\r\n\r\n\r\nexport default function Show({user, myList}) {\r\n    \r\n    const { id, title } = useParams();\r\n    const [keyword, setKeyword] = useState('');\r\n    const [shows, setShows] = useState([]);\r\n    const [titles, setTitles] = useState([]);\r\n    const [showSelected, setShowSelected] = useState([id || 0, title || '']);\r\n    var filterFlag = user.length > 0;\r\n    // const [showActors, setShowActors] = useState([]);\r\n    \r\n    // useEffect(() => {\r\n    // }, [showSelected])\r\n\r\n    useEffect(() => {\r\n        setShowSelected([id, title]);\r\n        setKeyword(\"\");\r\n        getSearchData(\"\");\r\n        window.scroll({top: 0, left: 0, behavior: \"smooth\"})\r\n    }, [id, title])\r\n    \r\n    const getSearchData = async(keyword) => {\r\n        setKeyword(keyword);\r\n        setTitles([])\r\n        // if(keyword === \"\") {\r\n        //     setTitles([])\r\n        // }\r\n        // else {\r\n            var idRes = [];\r\n            var tRes = [];\r\n\r\n            const searchData = await fetch ('/api/search', {\r\n                method: 'POST',\r\n                headers: {\r\n                  'content-type': 'application/json',\r\n                  'Accept': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                  Title: keyword,\r\n                  myList: myList,\r\n                  flag: filterFlag\r\n                })\r\n            })\r\n            .then(res => res.json());\r\n\r\n            // console.log(\"RD\", returnedData)\r\n            for (let i in searchData) {\r\n                searchData[i] = Object.values(searchData[i]);\r\n                tRes.push(searchData[i][Title]);\r\n                idRes.push(searchData[i][ShowID]);\r\n            }\r\n            setTitles(tRes);\r\n            setShows(idRes);\r\n        // }\r\n    }\r\n\r\n    return (   \r\n        <>\r\n        <div className=\"show\">\r\n            {/* {console.log(\"showSelected\", showSelected)} */}\r\n            {showSelected[0] !== 0 && showSelected[0] != null //!= 0//.length > 1 //\r\n                ? <>\r\n                    {showSelected[0] !== 0\r\n                        ? <h1 id=\"animeTitle\"> {showSelected[Title]} </h1>\r\n                        : <></>\r\n                    }\r\n                    <div className=\"animeSearchSide\">\r\n                        <input\r\n                            id=\"animeSearch\"\r\n                            className=\"search\"\r\n                            type=\"search\"\r\n                            placeholder=\"Search Anime\"\r\n                            autoComplete=\"off\"\r\n                            onChange={(e) => getSearchData(e.target.value)}\r\n                            value={keyword} />\r\n                        <div className=\"results\">\r\n                            {/* Display 10 filtered results. Change Show on click */}\r\n                            {titles.slice(0,10).map((title, index) => (\r\n                                <Link to={`/Anime/${shows[index]}/${title}`} className=\"resBox\">{title}</Link>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                    <ShowInfo Show={showSelected} user={user} myList={myList} flag={filterFlag}/>\r\n                </>\r\n                : <><h2 id=\"begin\">Search for an Anime to Begin!</h2>\r\n                <div className=\"animeSearchSide\">\r\n                        <input\r\n                            id=\"animeSearch\"\r\n                            className=\"search\"\r\n                            type=\"search\"\r\n                            placeholder=\"Search Anime\"\r\n                            autoComplete=\"off\"\r\n                            onChange={(e) => getSearchData(e.target.value)}\r\n                            value={keyword} />\r\n                        <div className=\"results\">\r\n                            {/* Display 10 filtered results. Change Show on click */}\r\n                            {titles.slice(0,10).map((title, index) => (\r\n                                <Link key={title} to={`/Anime/${shows[index]}/${title}`} className=\"resBox\">{title}</Link>\r\n                            ))}\r\n                        </div>\r\n                    </div></>\r\n            }\r\n            \r\n            {/* <ShowInfo list={myList} show={myList.shows[51535]} /> */}\r\n        </div> \r\n        </>    \r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}